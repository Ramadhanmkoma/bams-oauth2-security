-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
--BEGIN;
--
--
--CREATE TABLE IF NOT EXISTS public.admin
--(
--    id bigint NOT NULL,
--    emp_id character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    CONSTRAINT admin_pkey PRIMARY KEY (id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_biometric_records
--(
--    id bigint NOT NULL DEFAULT nextval('bams_biometric_records_id_seq'::regclass),
--    lecturer_id bigint,
--    student_id bigint,
--    biometric_data oid NOT NULL,
--    CONSTRAINT bams_biometric_records_pkey PRIMARY KEY (id),
--    CONSTRAINT bams_biometric_records_lecturer_id_key UNIQUE (lecturer_id),
--    CONSTRAINT bams_biometric_records_student_id_key UNIQUE (student_id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_classinfos
--(
--    date date NOT NULL,
--    present boolean NOT NULL,
--    id bigint NOT NULL DEFAULT nextval('bams_classinfos_id_seq'::regclass),
--    lect_id bigint NOT NULL,
--    stud_id bigint NOT NULL,
--    CONSTRAINT bams_classinfos_pkey PRIMARY KEY (id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_hrs
--(
--    id bigint NOT NULL,
--    emp_id character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    CONSTRAINT bams_hrs_pkey PRIMARY KEY (id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_lect_attendances
--(
--    date date NOT NULL,
--    present boolean NOT NULL,
--    class_id bigint NOT NULL,
--    id bigint NOT NULL DEFAULT nextval('bams_lect_attendances_id_seq'::regclass),
--    lect_id bigint NOT NULL,
--    session_id bigint NOT NULL,
--    CONSTRAINT bams_lect_attendances_pkey PRIMARY KEY (id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_lecturers
--(
--    id bigint NOT NULL,
--    department character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    lect_id character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    subject_taught character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    CONSTRAINT bams_lecturers_pkey PRIMARY KEY (id),
--    CONSTRAINT bams_lecturers_lect_id_key UNIQUE (lect_id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_roles
--(
--    id bigint NOT NULL DEFAULT nextval('bams_roles_id_seq'::regclass),
--    name character varying(255) COLLATE pg_catalog."default",
--    permissions character varying(255) COLLATE pg_catalog."default",
--    CONSTRAINT bams_roles_pkey PRIMARY KEY (id),
--    CONSTRAINT bams_roles_name_key UNIQUE (name)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_sessions
--(
--    date date,
--    time_in time(6) without time zone,
--    time_out time(6) without time zone,
--    class_id bigint NOT NULL,
--    id bigint NOT NULL DEFAULT nextval('bams_sessions_id_seq'::regclass),
--    subject_id bigint NOT NULL,
--    CONSTRAINT bams_sessions_pkey PRIMARY KEY (id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_stud_attendances
--(
--    date date NOT NULL,
--    present boolean NOT NULL,
--    class_id bigint NOT NULL,
--    id bigint NOT NULL DEFAULT nextval('bams_stud_attendances_id_seq'::regclass),
--    session_id bigint NOT NULL,
--    stud_id bigint NOT NULL,
--    CONSTRAINT bams_stud_attendances_pkey PRIMARY KEY (id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_students
--(
--    id bigint NOT NULL,
--    batch character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    department character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    reg_no character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    CONSTRAINT bams_students_pkey PRIMARY KEY (id),
--    CONSTRAINT bams_students_reg_no_key UNIQUE (reg_no)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_subjects
--(
--    sub_id bigint NOT NULL DEFAULT nextval('bams_subjects_sub_id_seq'::regclass),
--    sub_code character varying(255) COLLATE pg_catalog."default",
--    sub_name character varying(255) COLLATE pg_catalog."default",
--    CONSTRAINT bams_subjects_pkey PRIMARY KEY (sub_id)
--);
--
--CREATE TABLE IF NOT EXISTS public.bams_users
--(
--    id bigint NOT NULL,
--    email character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    first_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    image_url character varying(255) COLLATE pg_catalog."default",
--    last_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    password character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    username character varying(255) COLLATE pg_catalog."default" NOT NULL,
--    CONSTRAINT bams_users_pkey PRIMARY KEY (id),
--    CONSTRAINT bams_users_email_key UNIQUE (email),
--    CONSTRAINT bams_users_username_key UNIQUE (username)
--);
--
--CREATE TABLE IF NOT EXISTS public.user_roles
--(
--    role_id bigint NOT NULL,
--    user_id bigint NOT NULL
--);
--
--ALTER TABLE IF EXISTS public.admin
--    ADD CONSTRAINT "FK9mjp5c40b6i5xy0dlhqawijae" FOREIGN KEY (id)
--    REFERENCES public.bams_users (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--CREATE INDEX IF NOT EXISTS admin_pkey
--    ON public.admin(id);
--
--
--ALTER TABLE IF EXISTS public.bams_biometric_records
--    ADD CONSTRAINT "FK9f0bhrcyj3gehytvyj2htgev0" FOREIGN KEY (student_id)
--    REFERENCES public.bams_students (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--CREATE INDEX IF NOT EXISTS bams_biometric_records_student_id_key
--    ON public.bams_biometric_records(student_id);
--
--
--ALTER TABLE IF EXISTS public.bams_biometric_records
--    ADD CONSTRAINT "FKadml35qjuwgbmdbmkn3ssysqx" FOREIGN KEY (lecturer_id)
--    REFERENCES public.bams_lecturers (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--CREATE INDEX IF NOT EXISTS bams_biometric_records_lecturer_id_key
--    ON public.bams_biometric_records(lecturer_id);
--
--
--ALTER TABLE IF EXISTS public.bams_classinfos
--    ADD CONSTRAINT "FK39nxyrt082sqrwqfs106m2ksl" FOREIGN KEY (stud_id)
--    REFERENCES public.bams_students (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_classinfos
--    ADD CONSTRAINT "FKabiuv7pifgljbp2mqsaa3br73" FOREIGN KEY (lect_id)
--    REFERENCES public.bams_lecturers (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_hrs
--    ADD CONSTRAINT "FKfq2d2bwke2o4mu1pd066nekvp" FOREIGN KEY (id)
--    REFERENCES public.bams_users (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--CREATE INDEX IF NOT EXISTS bams_hrs_pkey
--    ON public.bams_hrs(id);
--
--
--ALTER TABLE IF EXISTS public.bams_lect_attendances
--    ADD CONSTRAINT "FK1o7polfk991wo3anbjl9ddwap" FOREIGN KEY (class_id)
--    REFERENCES public.bams_classinfos (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_lect_attendances
--    ADD CONSTRAINT "FK1tnd66pyfqs0f1daoial3b6vt" FOREIGN KEY (session_id)
--    REFERENCES public.bams_sessions (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_lect_attendances
--    ADD CONSTRAINT "FKlw9t4cqfdlc5sgam3bg995tku" FOREIGN KEY (lect_id)
--    REFERENCES public.bams_lecturers (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_lecturers
--    ADD CONSTRAINT "FK7tjatufu1wdix3m8v4ih93f2t" FOREIGN KEY (id)
--    REFERENCES public.bams_users (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--CREATE INDEX IF NOT EXISTS bams_lecturers_pkey
--    ON public.bams_lecturers(id);
--
--
--ALTER TABLE IF EXISTS public.bams_sessions
--    ADD CONSTRAINT "FK1251a4efwnlkut6k58u04ng52" FOREIGN KEY (class_id)
--    REFERENCES public.bams_classinfos (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_sessions
--    ADD CONSTRAINT "FKulr27vaoijdc8ut1kepr1h0h" FOREIGN KEY (subject_id)
--    REFERENCES public.bams_subjects (sub_id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_stud_attendances
--    ADD CONSTRAINT "FK60eodc1mb3ky4m523uv4xpngk" FOREIGN KEY (class_id)
--    REFERENCES public.bams_classinfos (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_stud_attendances
--    ADD CONSTRAINT "FKbgblldy1s0yg5vxi0t9ucxbf6" FOREIGN KEY (stud_id)
--    REFERENCES public.bams_students (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_stud_attendances
--    ADD CONSTRAINT "FKr415kd5fjl3uivscfybfhklol" FOREIGN KEY (session_id)
--    REFERENCES public.bams_sessions (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.bams_students
--    ADD CONSTRAINT "FK1nm7scguc0t42potb1r904cff" FOREIGN KEY (id)
--    REFERENCES public.bams_users (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--CREATE INDEX IF NOT EXISTS bams_students_pkey
--    ON public.bams_students(id);
--
--
--ALTER TABLE IF EXISTS public.user_roles
--    ADD CONSTRAINT "FK9tswlu8dfbh7q75ibmw5w0pbb" FOREIGN KEY (user_id)
--    REFERENCES public.bams_users (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--
--ALTER TABLE IF EXISTS public.user_roles
--    ADD CONSTRAINT "FKfu1wv5tsvbam0jaflmyarsw3a" FOREIGN KEY (role_id)
--    REFERENCES public.bams_roles (id) MATCH SIMPLE
--    ON UPDATE NO ACTION
--    ON DELETE NO ACTION;
--
--END;